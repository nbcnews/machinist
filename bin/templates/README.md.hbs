[![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

# {{projectName}}

This project was generated by [Machinist](https://github.com/nbcnews/machinist)

## Requirements

- [Node.js](https://nodejs.org/) (v8.x required)

## Setup

### 1. Clone

Clone this repository.

### 2. Install Dependencies

This project recommends managing Node versions via [nvm](https://github.com/creationix/nvm).

```sh
npm install
```

### 3. Environment Variables

Setup the projects environment variables

```sh
cp .env.example .env
```

Then acquire the keys and add to `./.env` file

### 4. Story Configuration

Configure the story via `./config.yml`

## How to use

### Develop

Runs your project locally at `localhost:3000` with BrowserSync. Edit contents of `./layouts`, `./lib`, `./partials`, and `./src`.

```sh
npm run dev
```

Develop with debugging.

```sh
npm run dev:debug
```

### Edit Contents

Directory structure:

```
|-- .editorconfig
|-- .env.example
|-- .eslintignore
|-- .eslintrc
|-- .gitignore
|-- .htmlhintrc
|-- .nvmrc
|-- .stylelintrc
|-- LICENSE
|-- README.md
|-- config.yml # Configure story metadata, document IDs, asset paths, etc.
|-- package-lock.json
|-- package.json
|-- webpack.config.js
|-- assets
|   |-- ...
|   |-- 17-ai2html-machinist-template.ai
|   |-- ai2html.jsx
|-- cdnassets
|   |-- ...
|-- layouts
|   |-- embed.hbs # Layout for embedded story
|   |-- story.hbs # Layout for standalone story
|-- lib
|   |-- dropboxpaperjson.js
|   |-- googledocjson.js
|   |-- helpers
|       |-- index.js
|-- partials
|   |-- head.hbs
|   |-- scripts.hbs
|   |-- stats.hbs
|   |-- story.hbs # Story markup
|   |-- story # Story components
|       |-- ...
|-- src
|   |-- dataviz.html
|   |-- embed.html # Includes story.hbs
|   |-- humans.txt
|   |-- index.html # Includes story.hbs
|   |-- robots.txt
|   |-- data
|   |   |-- globals
|   |   |   |-- global.json # Global metadata
|   |   |-- models
|   |       |-- dropboxpaper.json # Dropbox Paper content
|   |       |-- googledoc.json # Google Doc content
|   |-- scripts
|   |   |-- .eslintrc
|   |   |-- dataviz.js
|   |   |-- main.js
|   |   |-- modules
|   |   |   |-- ...
|   |   |-- vendor
|   |       |-- ...
|   |-- styles
|       |-- _base.scss
|       |-- _config.scss
|       |-- _states.scss
|       |-- dataviz.scss
|       |-- main.scss
|       |-- components
|       |   |-- ...
|       |-- layout
|       |   |-- ...
|       |-- mixins
|       |   |-- ...
|       |-- utilities
|       |   |-- ...
|       |-- vendor
|           |-- ...
|-- www # Generated output
    |-- embed.json
    |-- humans.txt
    |-- index.html
    |-- robots.txt
    |-- assets
    |   |-- ...
    |-- data
    |   |-- models
    |       |-- ...
    |-- dataviz
    |   |-- index.html
    |-- embed
    |   |-- index.html
    |-- scripts
    |   |-- dataviz.bundle.js
    |   |-- dataviz.js
    |   |-- main.bundle.js
    |   |-- main.js
    |   |-- modules
    |   |   |-- ...
    |   |-- vendor
    |       |-- ...
    |-- styles
        |-- dataviz.css
        |-- dataviz.json
        |-- main-7a5f98a1f181d729b0f360652cdba7f2.css
        |-- main-7a5f98a1f181d729b0f360652cdba7f2.json
        |-- main.css
        |-- main.json
```

To pull down content edits from document(s) set in the `./config.yml`

```sh
npm run doc-ingest
```

### Build

Generates your output to be deployed in the folder `./www`.

```sh
npm run build
```

Build with debugging.

```sh
npm run build:debug
```

### Publish

Generates and publishes the dist to s3.

```sh
npm run publish
```

### Lint

Lints your styles, scripts, and generated HTML.

```sh
npm run lint
```

### Publish assets

Publish static assets in the `cdnassets` folder, like images and videos, to the CDN

```sh
npm run publish:cdn
```

### Format

Fix auto-fixable errors in your styles and scripts.

```sh
npm run format
```

### ai2html

Can be changed, but by default:

- Duplicate or Rename `assets/##-ai2html-machinist-template.ai` for your graphic
- Install `ai2html.jsx` for Illustrator. [Docs](http://ai2html.org/#how-to-install-ai2html)
- If using ArchieML for data, use the following snippet to place the graphic in the body

```
{.ai2html}
title: Optional title
subtitle: Optional subtitle
fileName: name-of-the-ai2html.html
caption: Optional caption
source: Optional Source
{}
```

- Design and develop
- `npm run publish` will update ai2html image paths and rev assets
